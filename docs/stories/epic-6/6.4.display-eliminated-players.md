# Story 6.4: Display Eliminated Players

## Status
Ready for Review

## Story

**As a** user,
**I want** to see which players have been eliminated,
**so that** I know who is still in the game.

## Acceptance Criteria

1. **Given** players have been eliminated (Story 4.2)
2. **When** I view the main game screen
3. **Then** eliminated players are clearly visible:
   - Player names/cards are visually distinct (grayed out, reduced opacity, or marked)
   - Clear indication that they are eliminated
   - Eliminated players are still visible but not interactive for score entry
4. **And** the indication is accessible (screen reader announces elimination status)
5. **And** color coding is supplemented with other indicators (icons, text) for accessibility
6. **And** the visual design follows the design system

**FRs covered:** FR39, NFR41

## Tasks / Subtasks

- [x] Update player card display (AC: 3)
  - [x] Show eliminated players with visual distinction
  - [x] Gray out or reduce opacity
  - [x] Add elimination indicator
  - [x] Keep players visible but non-interactive
- [x] Implement accessibility (AC: 4, 5)
  - [x] Screen reader announces elimination status
  - [x] Add icons or text indicators (not just color)
  - [x] Ensure proper semantic labels
- [x] Apply design system styling (AC: 6)
  - [x] Use NativeWind/Tailwind classes
  - [x] Follow design system guidelines
  - [x] Ensure visual distinction is clear

## Dev Notes

### Project Context
This story ensures eliminated players are clearly visible and distinguishable, while maintaining accessibility.

### Source Tree Information
- **Player card component**: `components/game/PlayerCard.tsx` - Show eliminated state
- **Main game screen**: `app/game/[id]/index.tsx` - Display eliminated players

### Architecture References
- **Visual Distinction**: Grayed out, reduced opacity, or marked
- **Accessibility**: Screen reader support, not just color
- **Design System**: Follow design system guidelines

### Dependencies
- Requires Story 4.2 (Automatic Player Elimination) to be completed
- Requires Story 2.3 (Main Game Screen) to be completed

### Testing

**Test File Location:**
- `components/game/__tests__/PlayerCard.test.tsx` - Eliminated player display tests

**Test Standards:**
- Test eliminated player visual distinction
- Test accessibility features
- Test design system compliance
- Mock eliminated player state

**Testing Frameworks:**
- Jest for unit testing
- React Native Testing Library for component testing

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-14 | 1.0 | Story created from Epic 6 | PM Agent |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5

### Debug Log References
None

### Completion Notes List
1. **Visual Distinction**: Enhanced eliminated player display in `PlayerCard.tsx`:
   - Reduced opacity (opacity-60) for eliminated players
   - Gray border (border-gray-400) instead of default border
   - Gray text color (text-gray-500) for player name
   - Gray score color (text-gray-400) instead of primary color
   - Clear visual distinction from active players

2. **Elimination Indicator**: Clear indication that player is eliminated:
   - "Eliminated" badge with icon (❌) and text
   - Badge uses `bg-eliminated` color from design system
   - Badge is always visible when player is eliminated
   - Text label provides clear indication (not just color)

3. **Non-Interactive State**: Eliminated players are visible but not interactive:
   - Card is disabled (`disabled={isDisabled}`)
   - `isDisabled` includes `player.is_eliminated` check
   - Card remains visible in the player list
   - Score entry is prevented (handled in game screen and ScoreEntryModal)

4. **Accessibility**: Comprehensive accessibility support:
   - Screen reader announces elimination status via `accessibilityLabel`
   - Label includes: "{player.name}, Score: {score}, Eliminated"
   - `accessibilityState={{ disabled: true }}` indicates disabled state
   - Icon (❌) and text ("Eliminated") supplement color coding
   - Information accessible without relying solely on color

5. **Design System Compliance**: Follows design system guidelines:
   - Uses NativeWind/Tailwind classes throughout
   - Uses `bg-eliminated` color from design system
   - Uses `rounded-badge` for badge styling
   - Uses `rounded-card` for card styling
   - Follows spacing and typography guidelines

6. **Testing**: Added comprehensive tests in `src/components/game/__tests__/PlayerCard.test.tsx`:
   - Tests for visual distinction (opacity, border, text colors)
   - Tests for elimination badge display
   - Tests for non-interactive state
   - Tests for accessibility labels
   - Tests for icon and text indicators
   - Tests for design system compliance
   - All tests verify eliminated player display works correctly

### File List
**Modified Files:**
- `src/components/game/PlayerCard.tsx` - Enhanced eliminated player display with better visual distinction, icon indicator, and improved styling
- `src/components/game/__tests__/PlayerCard.test.tsx` - Added comprehensive tests for eliminated player display (Story 6.4)

## QA Results

### Review Date: 2026-01-23

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Excellent implementation with clear visual distinction, comprehensive accessibility support, and design system compliance. Eliminated players are visible but non-interactive.

**Strengths:**
- Clear visual distinction (reduced opacity, gray border, gray text)
- Elimination badge with icon (❌) and text ("Eliminated")
- Non-interactive state (disabled, but visible)
- Comprehensive accessibility support (screen reader announcements, semantic labels)
- Color coding supplemented with icons and text (not just color)
- Design system compliance (NativeWind/Tailwind classes)
- Comprehensive test coverage (7 test cases covering all ACs)

### Refactoring Performed

No refactoring required. Code quality is excellent.

### Compliance Check

- Coding Standards: ✓ Follows React Native/TypeScript conventions, proper component structure
- Project Structure: ✓ Proper integration in PlayerCard component
- Testing Strategy: ✓ Comprehensive test suite with 100% AC coverage
- All ACs Met: ✓ All 6 acceptance criteria fully implemented and tested

### Improvements Checklist

- [x] All acceptance criteria verified through comprehensive tests
- [x] Visual distinction implemented (opacity, border, text colors)
- [x] Elimination indicator implemented (badge with icon and text)
- [x] Non-interactive state verified
- [x] Accessibility support verified
- [x] Color coding supplemented with icons/text verified
- [x] Design system compliance verified

### Security Review

No security concerns. Display-only feature with proper disabled state.

### Performance Considerations

Visual distinction is efficient with minimal performance impact. No performance issues identified.

### Files Modified During Review

No files modified during review.

### Gate Status

Gate: **PASS** → `docs/qa/gates/6.4.display-eliminated-players.yml`

### Recommended Status

✓ **Ready for Done** - All acceptance criteria met, comprehensive test coverage, excellent accessibility support.
