# Story 5.4: View Completed Game Results

## Status
Draft

## Story

**As a** user,
**I want** to view completed game results after the game ends,
**so that** I can review the final game state.

## Acceptance Criteria

1. **Given** a game has been completed (Story 5.1)
2. **When** I view the completed game (from winner screen or game history)
3. **Then** I can see:
   - Winner name and final score
   - All players and their final scores
   - Game metadata (date, time, duration if tracked)
   - Game status (completed)
4. **And** the information is displayed clearly
5. **And** the completed game is stored permanently in the database (NFR14)
6. **And** the UI follows the design system
7. **And** I can navigate back to start a new game
8. **And** a Maestro automation test flow is created in `.maestro/flows/` that:
    - Launches the app, creates a new game, adds at least 2 players, and navigates to the main game screen
    - Completes a game by having a player reach 50 points
    - Views the completed game results (from winner screen or game history)
    - Verifies winner name and final score are displayed
    - Verifies all players and their final scores are displayed
    - Verifies game metadata (date, time, duration if tracked) is displayed
    - Verifies game status (completed) is displayed
    - Verifies the information is displayed clearly
    - Verifies navigation back to start a new game is available
    - The test flow is added to the automation regression suite

**FRs covered:** FR46, NFR14

## Tasks / Subtasks

- [ ] Create completed game view (AC: 2, 3)
  - [ ] Display winner name and final score
  - [ ] Display all players and final scores
  - [ ] Display game metadata (date, time, duration)
  - [ ] Display game status
- [ ] Load completed game data (AC: 3)
  - [ ] Load game data from database
  - [ ] Load player data and final scores
  - [ ] Load game metadata
- [ ] Ensure permanent storage (AC: 5)
  - [ ] Verify completed games are stored permanently
  - [ ] Test database persistence
- [ ] Apply design system styling (AC: 6)
  - [ ] Use NativeWind/Tailwind classes
  - [ ] Follow spacing and typography guidelines
- [ ] Add navigation (AC: 7)
  - [ ] Add button to start new game
  - [ ] Navigate to home screen or new game screen

## Dev Notes

### Project Context
This story allows users to view completed game results, providing a way to review past games.

### Source Tree Information
- **Completed game view**: Can be in `app/game/[id]/winner.tsx` or separate screen
- **Database service**: `services/database.ts` - Load completed game data
- **Game history**: Future feature (Phase 2)

### Architecture References
- **Data Display**: Winner, players, scores, metadata
- **Permanent Storage**: Completed games stored permanently (NFR14)
- **Design System**: NativeWind/Tailwind styling
- **Navigation**: Return to start new game

### Dependencies
- Requires Story 5.1 (Winner Announcement) to be completed
- Requires Story 1.3 (Database Service) to be completed

### Testing

**Test File Location:**
- `app/__tests__/game/[id]/winner.test.tsx` - Completed game view tests

**Test Standards:**
- Test completed game data display
- Test database load
- Test permanent storage
- Test design system compliance
- Test navigation
- Mock database service

**Testing Frameworks:**
- Jest for unit testing
- React Native Testing Library for component testing

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-14 | 1.0 | Story created from Epic 5 | PM Agent |

## Dev Agent Record

### Agent Model Used
_To be populated by Dev Agent_

### Debug Log References
_To be populated by Dev Agent_

### Completion Notes List
_To be populated by Dev Agent_

### File List
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_
